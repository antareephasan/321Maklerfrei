{"version":3,"sources":["components/Forms/UpdateUserForm.js","components/Forms/UpdatePasswordForm.js","pages/Error.js","components/Tables/UserTable.js","components/Modals/SimpleModal.js","components/Forms/CreateUserForm.js","components/Modals/CreateUserModal.js","components/Modals/UpdateUserModal.js","components/Modals/UpdatePasswordModal.js","components/Modals/DeleteUserModal.js","pages/Users.js"],"names":["UpdateUserForm","formRef","callback","m_user","useContext","AuthContext","user","setUser","lastname","useState","saved","setSaved","t","useTranslation","innerRef","initialValues","username","name","email","validationSchema","Yup","shape","required","onSubmit","setStatus","setSubmitting","userService","updateUserDetails","id","then","response","data","error","errors","status","touched","isSubmitting","className","as","Input","type","placeholder","valid","block","value","disabled","message","UpdatePasswordForm","password","min","matches","updateUserPassword","result","PageError","to","Header","Body","dataTable","onAction","map","i","role","layout","size","onClick","e","preventDefault","UserTable","users","resultsPerPage","totalResults","onPageChange","onChange","label","SimpleModal","title","pos_text","neg_text","body","isOpen","onClose","enabled","CreateUserForm","createUser","toLowerCase","Select","val","CreateUserModal","React","setEnabled","useRef","current","validateForm","isValid","handleSubmit","UpdateUserModal","UpdatePasswordModal","DeleteUserModal","setError","deleteUser","catch","err","Users","SnackbarContext","openSnackbar","closeSnackbar","logout","isLoaded","setIsLoaded","showUpdateModal","setShowUpdateModal","showCreateModal","setShowCreateModal","showDeleteModal","setShowDeleteModal","showUpdatePasswordModal","setShowUpdatePasswordModal","activeUser","setActiveUser","setUsers","currentPage","setCurrentPage","setTotalResults","resfreshing","setRefreshing","useEffect","refreshUsers","useCallback","getUsers","results","handleAction","onModalClose","onModalAction","ThemedSuspense","PageTitle","config","page"],"mappings":"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","file":"static/js/12.0fde86dd.chunk.js","sourcesContent":["import React, { useState, useContext } from 'react'\r\nimport { Formik, Form, Field } from 'formik'\r\nimport * as Yup from 'yup'\r\nimport { userService } from '../../services'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { Input, Label, HelperText, Button } from '@windmill/react-ui'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nfunction UpdateUserForm({formRef, callback, m_user}) {\r\n  const { user, lastname, setUser } = useContext(AuthContext)\r\n  const [saved, setSaved] = useState(false)\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Formik\r\n      innerRef={formRef}\r\n      initialValues={{\r\n        username: m_user ? m_user.name : '',\r\n        lastname: m_user ? m_user.lastname : '',\r\n        email: m_user ? m_user.email : '',\r\n      }}\r\n      validationSchema={Yup.object().shape({\r\n        username: Yup.string().required(t('First Name is required')),\r\n        lastname: Yup.string().required(t('Last Name is required')),\r\n        email: Yup.string().email().required(t('Email is required')),\r\n      })}\r\n      onSubmit={({ username, lastname, email }, { setStatus, setSubmitting }) => {\r\n        setSaved(false)\r\n        setStatus()\r\n        userService.updateUserDetails(m_user.id, username, email, lastname)\r\n        .then(\r\n          response => {\r\n            setSaved(true)\r\n            setSubmitting(false)\r\n            if(user.id === m_user.id) setUser(response.data)\r\n            if(callback) callback(response.data)\r\n          },\r\n          error => {\r\n            setSubmitting(false);\r\n            if(error.response) {\r\n              setStatus(t(error.response.data));\r\n            } else {\r\n              setStatus(t('Some error occured.'));\r\n            }\r\n            if(callback) callback(null)\r\n          }\r\n        );\r\n      }}\r\n    >  \r\n      {({ errors, status, touched, isSubmitting }) => (\r\n        <Form>\r\n          <div className='flex gap-4'>\r\n            <Label className='flex-1'>\r\n              <span>{t(\"First Name\")}:</span>\r\n              <Field className=\"mt-1\" as={Input} name=\"username\" type=\"text\" placeholder={t(\"enter first name\")} />\r\n              {errors.username && touched.username ? (\r\n                <div>   \r\n                  <HelperText valid={false}>{t(errors.username)}</HelperText>\r\n                </div>\r\n              ) : null}\r\n            </Label>\r\n            <Label className='flex-1'>\r\n              <span>{t(\"Last Name\")}:</span>\r\n              <Field className=\"mt-1\" as={Input} name=\"lastname\" type=\"text\" placeholder={t(\"enter last name\")} />\r\n              {errors.lastname && touched.lastname ? (\r\n                <div>   \r\n                  <HelperText valid={false}>{t(errors.lastname)}</HelperText>\r\n                </div>\r\n              ) : null}\r\n            </Label>\r\n          </div>\r\n          <Label className=\"mt-4\">\r\n            <span>E-Mail:</span>\r\n            <Field className=\"mt-1\" as={Input} name=\"email\" type=\"email\" placeholder={t(\"enter email\")} />\r\n            {errors.email && touched.email ? (\r\n              <div>   \r\n                <HelperText valid={false}>{t(errors.email)}</HelperText>\r\n              </div>\r\n            ) : null}\r\n          </Label>\r\n\r\n          {!formRef && \r\n            <Button className=\"mt-6\" block type=\"submit\" value=\"submit\" disabled={isSubmitting}>\r\n              {t(\"Save Details\")}\r\n            </Button> \r\n          }\r\n\r\n          {status && (\r\n            <HelperText valid={false}>{status.message}</HelperText>\r\n          )}\r\n\r\n          {saved && (\r\n            <HelperText valid={true}>Saved!</HelperText>\r\n          )}\r\n          \r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  )\r\n}\r\n\r\nexport default UpdateUserForm","import React, { useState } from 'react'\r\nimport { Input, Label, HelperText, Button } from '@windmill/react-ui'\r\nimport { Formik, Form, Field } from 'formik'\r\nimport * as Yup from 'yup'\r\nimport { userService } from '../../services'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nfunction UpdatePasswordForm({formRef, callback, m_user}) {\r\n  const [saved, setSaved] = useState(false)\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <Formik\r\n      innerRef={formRef}\r\n      initialValues={{\r\n        password: ''\r\n      }}\r\n      validationSchema={Yup.object().shape({\r\n        password: Yup.string().min(8)\r\n          .matches('^.*[0-9].*$', 'Atleast one number required')\r\n          .matches('^.*[a-zA-Z].*$', 'Atleast one letter required')\r\n          .required(t('Password is required')),\r\n      })}\r\n      onSubmit={({ password }, { setStatus, setSubmitting }) => {\r\n        setSaved(false)\r\n        setStatus()\r\n        userService.updateUserPassword(m_user.id, password)\r\n        .then(\r\n          result => {\r\n            setSaved(true)\r\n            setSubmitting(false)\r\n            if(callback) callback(result.data)\r\n          },\r\n          error => {\r\n            setSubmitting(false);\r\n            if(error.response) {\r\n              setStatus(error.response.data)\r\n            } else {\r\n              setStatus(\"Some error occured.\")\r\n            }\r\n            if(callback) callback(null)\r\n          }\r\n        )\r\n      }}\r\n    >  \r\n      {({ errors, status, touched, isSubmitting }) => (\r\n        <Form>\r\n          <Label>\r\n            <span>{t(\"type new password\")}:</span>\r\n            <Field className=\"mt-1\" as={Input} name=\"password\" type=\"password\" placeholder=\"***************\" />\r\n            {errors.password && touched.password ? (\r\n              <div>   \r\n                <HelperText valid={false}>{t(errors.password)}</HelperText>\r\n              </div>\r\n            ) : null}\r\n          </Label>\r\n\r\n          {!formRef && \r\n            <Button className=\"mt-6\" block type=\"submit\" value=\"submit\" disabled={isSubmitting}>\r\n              {t(\"Save Password\")}\r\n            </Button> \r\n          }\r\n\r\n          {status && (\r\n            <HelperText valid={false}>{status}</HelperText>\r\n          )}\r\n\r\n          {saved && (\r\n            <HelperText valid={true}>Saved!</HelperText>\r\n          )}\r\n          \r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n}\r\n\r\nexport default UpdatePasswordForm","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { ForbiddenIcon } from '../icons'\r\n\r\nfunction PageError({message}) {\r\n  return (\r\n    <div className=\"flex flex-col items-center\">\r\n      <ForbiddenIcon className=\"w-12 h-12 mt-8 text-purple-200\" aria-hidden=\"true\" />\r\n      <h1 className=\"text-6xl font-semibold text-gray-700 dark:text-gray-200\">Error</h1>\r\n      <p className=\"text-gray-700 dark:text-gray-300\">\r\n        {message && message}{' '}\r\n        <Link className=\"text-purple-600 hover:underline dark:text-purple-300\" to=\"/app\">\r\n          Go back\r\n        </Link>\r\n        .\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PageError\r\n","import React from 'react'\r\nimport {\r\n  TableHeader,\r\n  TableCell,\r\n  TableBody,\r\n  TableRow,\r\n  Table,\r\n  TableFooter,\r\n  TableContainer,\r\n  Pagination,\r\n  Badge,\r\n  Button\r\n} from '@windmill/react-ui'\r\nimport { OutlinePersonIcon, EditIcon, TrashIcon } from '../../icons'\r\n\r\nfunction Header() {\r\n  return (\r\n    <TableHeader>\r\n      <tr>\r\n        <TableCell>Name</TableCell>\r\n        <TableCell>Email</TableCell>\r\n        <TableCell>Role</TableCell>\r\n        <TableCell>Actions</TableCell>\r\n      </tr>\r\n    </TableHeader>\r\n  )\r\n}\r\n\r\nfunction Body({dataTable, onAction}) {\r\n  return (\r\n    <TableBody>\r\n      {dataTable.map((user, i) => (\r\n        <TableRow key={i}>\r\n          <TableCell>\r\n            <div className=\"flex items-center text-sm\">\r\n              <div>\r\n                <p className=\"font-semibold\">{user.name}</p>\r\n              </div>\r\n            </div>\r\n          </TableCell>\r\n          <TableCell>\r\n            <span className=\"text-sm\">{user.email}</span>\r\n          </TableCell>\r\n          <TableCell>\r\n            <Badge type={user.role === \"admin\" ? \"primary\" : \"neutral\"}>{user.role}</Badge>\r\n          </TableCell>\r\n          <TableCell>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <Button layout=\"link\" size=\"icon\" aria-label=\"Edit\" onClick={(e) => {e.preventDefault(); if(onAction){onAction(user, 'updateUser')}} }>\r\n                <OutlinePersonIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n              </Button>\r\n              <Button layout=\"link\" size=\"icon\" aria-label=\"Edit Password\" onClick={(e) => {e.preventDefault(); if(onAction){onAction(user, 'updatePassword')}} }>\r\n                <EditIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n              </Button>\r\n              <Button layout=\"link\" size=\"icon\" aria-label=\"Delete\" onClick={(e) => {e.preventDefault(); if(onAction){onAction(user, 'deleteUser')}} }>\r\n                <TrashIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n              </Button>\r\n            </div>\r\n          </TableCell>\r\n        </TableRow>\r\n      ))}\r\n    </TableBody>\r\n  )\r\n}\r\n\r\nexport default function UserTable({users, resultsPerPage, totalResults, onAction, onPageChange}) {\r\n  return (\r\n    <>\r\n      <TableContainer className=\"mb-8\">\r\n        <Table>\r\n          <Header />\r\n          <Body dataTable={users} onAction={onAction} />\r\n        </Table>\r\n        <TableFooter>\r\n          <Pagination\r\n            totalResults={totalResults}\r\n            resultsPerPage={resultsPerPage}\r\n            onChange={onPageChange}\r\n            label=\"Table navigation\"\r\n          />\r\n        </TableFooter>\r\n      </TableContainer>\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from '@windmill/react-ui'\r\n\r\nfunction SimpleModal({title, pos_text, neg_text, body, isOpen, onClose, onAction, enabled}) {\r\n  return (\r\n    <>\r\n      <Modal isOpen={isOpen} onClose={onClose}>\r\n        <ModalHeader>{title}</ModalHeader>\r\n        <ModalBody>\r\n          {body}\r\n        </ModalBody>\r\n        <ModalFooter>\r\n          <div className=\"hidden sm:block\">\r\n            <Button layout=\"outline\" onClick={onClose}>\r\n              {neg_text}\r\n            </Button>\r\n          </div>\r\n          <div className=\"hidden sm:block\">\r\n            <Button onClick={onAction} disabled={!enabled}>\r\n              {pos_text}\r\n            </Button>\r\n          </div>\r\n          <div className=\"block w-full sm:hidden\">\r\n            <Button block size=\"large\" layout=\"outline\" onClick={onClose}>\r\n              {neg_text}\r\n            </Button>\r\n          </div>\r\n          <div className=\"block w-full sm:hidden\">\r\n            <Button block size=\"large\" onClick={onAction} disabled={!enabled}>\r\n              {pos_text}\r\n            </Button>\r\n          </div>\r\n        </ModalFooter>\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SimpleModal\r\n","import React from \"react\"\r\nimport { Formik, Form, Field } from 'formik'\r\nimport * as Yup from 'yup'\r\nimport { userService } from \"../../services\"\r\nimport { Input, Label, Select, HelperText } from '@windmill/react-ui'\r\n\r\nfunction CreateUserForm({formRef, callback}) {\r\n  return (\r\n    <Formik\r\n      innerRef={formRef}\r\n      initialValues={{\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n        role: 'user',\r\n      }}\r\n      validationSchema={Yup.object().shape({\r\n        username: Yup.string().required('Username is required'),\r\n        email: Yup.string().email().required('Email is required'),\r\n        password: Yup.string().min(8)\r\n          .matches('^.*[0-9].*$', 'Atleast one number required')\r\n          .matches('^.*[a-zA-Z].*$', 'Atleast one letter required')\r\n          .required('Password is required'),\r\n        role: Yup.string().required('Role is required'),          \r\n      })}\r\n      onSubmit={async ({ username, email,  password, role }, { setStatus, setSubmitting }) => {\r\n        setStatus();\r\n        await userService.createUser(username, email, password, role.toLowerCase())\r\n          .then(\r\n            response => {\r\n              callback(true);\r\n            },\r\n            error => {\r\n              if(error.response) {\r\n                setStatus(error.response.data);\r\n              } else {\r\n                setStatus('Some error occured.');\r\n              }\r\n              callback(false);\r\n            }\r\n          );\r\n      }}\r\n    >  \r\n      {({ errors, status, touched, isSubmitting }) => (\r\n        <Form>\r\n          <Label>\r\n            <span>Name</span>\r\n            <Field className=\"mt-1\" as={Input} name=\"username\" type=\"text\" placeholder=\"John Doe\" />\r\n            {errors.username && touched.username ? (\r\n              <div>   \r\n                <HelperText valid={false}>{errors.username}</HelperText>\r\n              </div>\r\n            ) : null}\r\n          </Label>\r\n\r\n          <Label className=\"mt-4\">\r\n            <span>Email</span>\r\n            <Field className=\"mt-1\" as={Input} name=\"email\" type=\"email\" placeholder=\"john@doe.com\" />\r\n            {errors.email && touched.email ? (\r\n              <div>   \r\n                <HelperText valid={false}>{errors.email}</HelperText>\r\n              </div>\r\n            ) : null}\r\n          </Label>\r\n\r\n          <Label className=\"mt-4\">\r\n            <span>Password</span>\r\n            <Field className=\"mt-1\" as={Input} name=\"password\" type=\"password\" placeholder=\"***************\" />\r\n            {errors.password && touched.password ? (\r\n              <div>   \r\n                <HelperText valid={false}>{errors.password}</HelperText>\r\n              </div>\r\n            ) : null}\r\n          </Label>\r\n\r\n          <Label className=\"mt-4\">\r\n            <span>Role</span>\r\n            <Field className=\"mt-1\" as={Select} name=\"role\">\r\n              <option val=\"user\">User</option>\r\n              <option val=\"admin\">Admin</option>\r\n            </Field>\r\n          </Label>\r\n\r\n          {status && (\r\n            <HelperText valid={false}>{status.message}</HelperText>\r\n          )}\r\n          \r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n}\r\n\r\nexport default CreateUserForm","import React from \"react\"\r\nimport SimpleModal from './SimpleModal.js'\r\nimport CreateUserForm from '../Forms/CreateUserForm'\r\nexport default function CreateUserModal({isOpen, onClose, onAction}) {\r\n  const [enabled, setEnabled] = React.useState(true)\r\n  const formRef = React.useRef()\r\n\r\n  const handleModalClose = () => {\r\n    setEnabled(true)\r\n    onClose('createUser')\r\n  }\r\n\r\n  const handleModalAction = () => {\r\n    if (formRef.current) {\r\n      formRef.current.validateForm()\r\n      .then(() => {\r\n        setEnabled(!formRef.current.isValid)\r\n        formRef.current.handleSubmit()\r\n      })\r\n    }\r\n  }\r\n\r\n  const formSubmitCallback = (val) => {\r\n    setEnabled(true)\r\n    if(val) onAction('createUser')\r\n  }\r\n\r\n  return (\r\n    <SimpleModal isOpen={isOpen}\r\n      title=\"Create User\"\r\n      neg_text=\"Cancel\" \r\n      pos_text=\"Confirm\"\r\n      onClose={handleModalClose}\r\n      onAction={handleModalAction}\r\n      enabled={enabled}\r\n      body={<CreateUserForm formRef={formRef} callback={formSubmitCallback} />} />\r\n  );\r\n}","import React from \"react\"\r\nimport SimpleModal from './SimpleModal'\r\nimport UpdateUserForm from '../Forms/UpdateUserForm'\r\n\r\nexport default function UpdateUserModal({isOpen, onClose, onAction, m_user}) {\r\n  const [enabled, setEnabled] = React.useState(true)\r\n  const formRef = React.useRef()\r\n\r\n  const handleModalClose = () => {\r\n    setEnabled(true)\r\n    onClose('updateUser')\r\n  }\r\n\r\n  const handleModalAction = () => {\r\n    if (formRef.current) {\r\n      formRef.current.validateForm()\r\n      .then(() => {\r\n        setEnabled(!formRef.current.isValid)\r\n        formRef.current.handleSubmit()\r\n      })\r\n    }\r\n  }\r\n\r\n  const formSubmitCallback = (val) => {\r\n    setEnabled(true)\r\n    if(val) onAction('updateUser')\r\n  }\r\n\r\n  return (\r\n    <SimpleModal isOpen={isOpen}\r\n      title=\"Update User\"\r\n      neg_text=\"Cancel\" \r\n      pos_text=\"Confirm\"\r\n      onClose={handleModalClose}\r\n      onAction={handleModalAction}\r\n      enabled={enabled}\r\n      body={<UpdateUserForm formRef={formRef} callback={formSubmitCallback} m_user={m_user} />} />\r\n  );\r\n}","import React from \"react\"\r\nimport SimpleModal from \"./SimpleModal.js\"\r\nimport UpdatePasswordForm from '../Forms/UpdatePasswordForm'\r\n\r\nexport default function UpdatePasswordModal({isOpen, onClose, onAction, m_user}) {\r\n  const [enabled, setEnabled] = React.useState(true)\r\n  const formRef = React.useRef()\r\n\r\n  const handleModalClose = () => {\r\n    setEnabled(true)\r\n    onClose('updatePassword')\r\n  }\r\n\r\n  const handleModalAction = () => {\r\n    if (formRef.current) {\r\n      formRef.current.validateForm()\r\n      .then(() => {\r\n        setEnabled(!formRef.current.isValid)\r\n        formRef.current.handleSubmit()\r\n      })\r\n    }\r\n  }\r\n\r\n  const formSubmitCallback = (val) => {\r\n    setEnabled(true)\r\n    if(val) onAction('updatePassword')\r\n  }\r\n\r\n  return (\r\n    <SimpleModal isOpen={isOpen}\r\n      title=\"Update Password\"\r\n      neg_text=\"Cancel\" \r\n      pos_text=\"Confirm\"\r\n      onClose={handleModalClose}\r\n      onAction={handleModalAction}\r\n      enabled={enabled}\r\n      body={<UpdatePasswordForm formRef={formRef} callback={formSubmitCallback} m_user={m_user} />} />\r\n  );\r\n}","import React from \"react\"\r\nimport SimpleModal from \"./SimpleModal.js\"\r\nimport { userService } from \"../../services\"\r\nimport { HelperText } from '@windmill/react-ui'\r\n\r\nexport default function DeleteUserModal({isOpen, onClose, onAction, m_user}) {\r\n  const [error, setError] = React.useState(null);\r\n  const [enabled, setEnabled] = React.useState(true);\r\n\r\n  const handleModalClose = () => {\r\n    setEnabled(true)\r\n    setError(null)\r\n    onClose('deleteUser')\r\n  }\r\n\r\n  const handleModalAction = () => {\r\n    setEnabled(false)\r\n    userService.deleteUser(m_user.id)\r\n    .then(() => {\r\n      setEnabled(true)\r\n      setError(null)\r\n      onAction('deleteUser')\r\n    })\r\n    .catch(err => {\r\n      setEnabled(true)\r\n      if(err.response) {\r\n        setError(err.response.data.message);\r\n      } else {\r\n        setError('Some error occured.');\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <SimpleModal isOpen={isOpen}\r\n      title=\"Delete User\"\r\n      neg_text=\"Cancel\" \r\n      pos_text=\"Delete User\"\r\n      onClose={handleModalClose}\r\n      onAction={handleModalAction}\r\n      enabled={enabled}\r\n      body={<div>\r\n        <p>\"Are you sure you want to delete this user?\"</p>\r\n        {error && (\r\n          <HelperText valid={false}>{error}</HelperText>\r\n        )}\r\n      </div>} />\r\n  );\r\n}","import React, { useState, useEffect, useContext, useCallback } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nimport { SnackbarContext } from '../context/SnackbarContext'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport ThemedSuspense from '../components/ThemedSuspense'\r\nimport PageError from './Error'\r\nimport PageTitle from '../components/Typography/PageTitle'\r\nimport UserTable from '../components/Tables/UserTable'\r\nimport CreateUserModal from '../components/Modals/CreateUserModal'\r\nimport UpdateUserModal from '../components/Modals/UpdateUserModal'\r\nimport UpdatePasswordModal from '../components/Modals/UpdatePasswordModal'\r\nimport DeleteUserModal from '../components/Modals/DeleteUserModal'\r\nimport {\r\n  Button\r\n} from '@windmill/react-ui'\r\nimport { config } from '../assets/config/config'\r\nimport { userService } from '../services'\r\n\r\nfunction Users() {\r\n  const { openSnackbar, closeSnackbar } = useContext(SnackbarContext)\r\n  const { logout } = useContext(AuthContext)\r\n  const [isLoaded, setIsLoaded] = useState(false)\r\n  const [showUpdateModal, setShowUpdateModal] = useState(false)\r\n  const [showCreateModal, setShowCreateModal] = useState(false)\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false)\r\n  const [showUpdatePasswordModal, setShowUpdatePasswordModal] = useState(false)\r\n  const [activeUser, setActiveUser] = useState(null)\r\n  const [users, setUsers] = useState(null)\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [totalResults, setTotalResults] = useState(0)\r\n  const [error, setError] = useState(null)\r\n  const [resfreshing, setRefreshing] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if(resfreshing) {\r\n      openSnackbar('Refresing users..')\r\n    } else {\r\n      closeSnackbar()\r\n    }\r\n  }, [resfreshing, openSnackbar, closeSnackbar])\r\n\r\n  const refreshUsers = useCallback(() => {\r\n    setRefreshing(true)\r\n    return userService.getUsers(currentPage)\r\n    .then(data => {\r\n      setRefreshing(false)\r\n      setUsers(data.results)\r\n      setTotalResults(data.totalResults)\r\n      return null\r\n    })\r\n    .catch(err => {\r\n      setRefreshing(false)\r\n      setError(err)\r\n      return null\r\n    })\r\n  }, [currentPage])\r\n\r\n  useEffect(() => {\r\n    refreshUsers()\r\n    .then(() => {\r\n      setIsLoaded(true)\r\n    })\r\n  }, [refreshUsers])\r\n\r\n  const handleAction = (user, type) => {\r\n    setActiveUser(user)\r\n    switch(type) {\r\n      case 'createUser' :\r\n        setShowCreateModal(true) \r\n        break\r\n      case 'updateUser' :\r\n        setShowUpdateModal(true) \r\n        break\r\n      case 'updatePassword':\r\n        setShowUpdatePasswordModal(true) \r\n        break\r\n      case 'deleteUser':\r\n        setShowDeleteModal(true) \r\n        break\r\n      default:\r\n        setActiveUser(null) \r\n        break\r\n    }\r\n  }\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page)\r\n  }\r\n\r\n  const onModalClose = (type) => {\r\n    setActiveUser(null)\r\n    switch(type) {\r\n      case 'createUser' :\r\n        setShowCreateModal(false) \r\n        break\r\n      case 'updateUser' :\r\n        setShowUpdateModal(false) \r\n        break\r\n      case 'updatePassword':\r\n        setShowUpdatePasswordModal(false) \r\n        break\r\n      case 'deleteUser':\r\n        setShowDeleteModal(false) \r\n        break\r\n      default:\r\n        break\r\n    } \r\n  }\r\n\r\n  const onModalAction = (type) => {\r\n    setActiveUser(null)\r\n    switch(type) {\r\n      case 'createUser' :\r\n        setShowCreateModal(false) \r\n        refreshUsers() \r\n        break\r\n      case 'updateUser' :\r\n        setShowUpdateModal(false) \r\n        refreshUsers() \r\n        break\r\n      case 'updatePassword':\r\n        setShowUpdatePasswordModal(false) \r\n        break\r\n      case 'deleteUser':\r\n        setShowDeleteModal(false) \r\n        refreshUsers()\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  if(!isLoaded) {\r\n    return <ThemedSuspense />\r\n  }\r\n\r\n  if(error) {\r\n    if(error.response) {\r\n      switch (error.response.status) {\r\n        case 401:\r\n          logout()\r\n          return <Redirect to='/auth' />\r\n        case  403:\r\n          return <PageError message=\"Unauthorized : Only admin can view/update all users.\" />\r\n        default: \r\n          return <PageError message=\"Some error occured : please try again.\" />\r\n      }\r\n    } else {\r\n      return <PageError message=\"Some error occured : please try again.\" />\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-wrap justify-between\">\r\n        <PageTitle>All Users</PageTitle>\r\n        <div className=\"my-6\">\r\n          <Button onClick={(e) => {e.preventDefault(); handleAction(null, 'createUser')}}>Create User</Button>\r\n        </div>\r\n      </div>\r\n      <UserTable users={users} resultsPerPage={config.users.resultsPerPage} totalResults={totalResults} onAction={handleAction} onPageChange={handlePageChange} />\r\n      <CreateUserModal isOpen={showCreateModal} onClose={onModalClose} onAction={onModalAction}/>\r\n      <UpdateUserModal isOpen={showUpdateModal} onClose={onModalClose} onAction={onModalAction} m_user={activeUser}/>\r\n      <UpdatePasswordModal isOpen={showUpdatePasswordModal} onClose={onModalClose} onAction={onModalAction} m_user={activeUser}/>\r\n      <DeleteUserModal isOpen={showDeleteModal} onClose={onModalClose} onAction={onModalAction} m_user={activeUser}/>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Users\r\n"],"sourceRoot":""}